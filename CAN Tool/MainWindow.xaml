<Window x:Name="window" x:Class="CAN_Tool.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:col="clr-namespace:System.Collections;assembly=mscorlib" xmlns:sys="clr-namespace:System;assembly=mscorlib" xmlns:vm="clr-namespace:CAN_Tool.ViewModels" xmlns:v="clr-namespace:CAN_Tool.ViewModels.Validators" xmlns:c="clr-namespace:CAN_Tool.ViewModels.Converters" xmlns:cc="clr-namespace:CAN_Tool.CustomControls" xmlns:fa="http://schemas.fontawesome.com/icons/" xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes" xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit" mc:Ignorable="d" xmlns:sctplt="clr-namespace:ScottPlot;assembly=ScottPlot" d:DataContext="{d:DesignInstance Type=vm:MainWindowViewModel}" Title="{Binding Title}" Height="900" Width="1500" MaxWidth="3000" MaxHeight="2000" TextElement.Foreground="{DynamicResource MaterialDesignBody}" TextElement.FontWeight="Regular" TextElement.FontSize="13" TextOptions.TextFormattingMode="Ideal" TextOptions.TextRenderingMode="Auto" Background="{DynamicResource MaterialDesignPaper}" FontFamily="{DynamicResource MaterialDesignFont}" WindowStyle="ThreeDBorderWindow" MouseLeftButtonDown="Window_MouseLeftButtonDown">

    <Window.Resources>
        <c:DataToStringConverter x:Key="DataConverter" />
        <c:FuelPumpIndicatorConverter x:Key="FuelPumpConverter" />
        <c:BoolToVisibleConverter x:Key="BoolToVisibileConverter" />
        <c:IntToVisibleConverter x:Key="IntToVisibileConverter" />
        <c:HeaterToVisibleConverter x:Key="OnlyForHeaters" />
        <c:BinarToVisibleConverter x:Key="OnlyForBinars" />
        <c:PressureSensorToVisible x:Key="OnlyForPressureSensors" />
        <c:BootloaderToVisible x:Key="OnlyForBootloaders" />
        <c:PlanarToVisibleConverter x:Key="OnlyForPlanars" />
        <c:HcuToVisibleConverter x:Key="OnlyForHcu" />
        <c:GenericLoadTrippleToVisible x:Key="OnlyForGenericLoadTripple" />
        <c:AcInverterToVisibleConveter x:Key="OnlyForAcInverter" />
        <c:StateToBorderBrushConverter x:Key="BoolToBrush" />
        <c:BoolToOpacity x:Key="BoolToOpacity" />
        <c:FarenheitConverter x:Key="ToFarenheit" />
        <c:TimeSpanConverter x:Key="ToTimeSpan" />
        <c:HexStringToIntConverter x:Key="HexConverter" />
        <c:HexStringToUlongConverter x:Key="HexToUlongConverter" />
        <c:NullToVisibleConverter x:Key="NullToVisibleConverter" />
        <c:BindingListToStringConverter x:Key="VersionConverter" />
        <c:DataConverter x:Key="HexToDataConverter" />

    </Window.Resources>
    <DockPanel>
        <StatusBar x:Name="MyStatusbar" DockPanel.Dock="Bottom" Background="{DynamicResource MaterialDesignCardBackground}">
            <StatusBarItem HorizontalAlignment="Left">
                <TextBlock FontSize="20" Foreground="{DynamicResource MaterialDesignBodyLight}" Text="{Binding OmniInstance.CurrentTask.TaskStatus}" Margin="10"></TextBlock>
            </StatusBarItem>
            <ProgressBar Width="300" Value="{Binding OmniInstance.CurrentTask.PercentComplete}" Height="30" Margin="5 0 5 0" Visibility="{Binding OmniInstance.CurrentTask.Occupied,Converter={StaticResource BoolToVisibileConverter}}"></ProgressBar>
            <StatusBarItem HorizontalAlignment="Left">
                <Button Content="{DynamicResource b_cancel}" Command="{Binding CancelOperationCommand}" Margin="5" Visibility="{Binding OmniInstance.CurrentTask.Occupied,Converter={StaticResource BoolToVisibileConverter}}"></Button>
            </StatusBarItem>

            <StatusBarItem HorizontalAlignment="Right">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Foreground="{DynamicResource MaterialDesignBodyLight}" FontSize="20" Text="" Margin="10"></TextBlock>
                </StackPanel>
            </StatusBarItem>
        </StatusBar>

        <Grid DockPanel.Dock="Top">
            <StackPanel>
                <DockPanel>
                    <StackPanel DockPanel.Dock="Left" Orientation="Horizontal" Margin="5">
                        <Button Style="{DynamicResource MaterialDesignOutlinedButton}" Content="{DynamicResource b_refreshPorts}" Margin="5" Command="{Binding Path=RefreshPortListCommand}" Cursor="Hand" />
                        <ComboBox Style="{StaticResource MaterialDesignComboBox}" x:Name="PortNameList" Margin="5" MinWidth="70" ItemsSource="{Binding PortList}" SelectedItem="{Binding PortName}" />

                        <Button Style="{DynamicResource MaterialDesignOutlinedButton}" Margin="5" Content="{Binding PortButtonString,Mode=OneWay}" Command="{Binding TogglePortCommand}" Cursor="Hand" />

                        <StackPanel Orientation="Horizontal">

                        </StackPanel>

                    </StackPanel>
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" HorizontalAlignment="Right">
                        <CheckBox x:Name="AdapterSettings" Margin="10" Style="{StaticResource MaterialDesignFilterChipPrimaryOutlineCheckBox}" Content="Adapter settings" FontSize="20" IsChecked="{Binding CanAdapterSettings}" Cursor="Hand"></CheckBox>
                        <CheckBox x:Name="DarkModeCheckBox" Margin="10" IsChecked="True" Style="{StaticResource MaterialDesignFilterChipPrimaryOutlineCheckBox}" Content="Dark" FontSize="20" Checked="DarkMode_Checked" Unchecked="DarkMode_Checked"></CheckBox>
                        <CheckBox x:Name="ImperialUnits" Margin="10" Style="{StaticResource MaterialDesignFilterChipPrimaryOutlineCheckBox}" Content="Imperial" FontSize="20" IsChecked="{Binding OmniInstance.UseImperial}" Checked="ImperialUnits_Checked" Unchecked="ImperialUnits_Checked"></CheckBox>
                        <ComboBox Style="{DynamicResource MaterialDesignComboBox}" x:Name="menuColor" HorizontalAlignment="Right" Margin="5" SelectionChanged="menuColor_SelectionChanged" ItemsSource="{Binding Brushes}">
                            <ComboBox.ItemTemplate>
                                <ItemContainerTemplate>
                                    <Rectangle Width="30" Height="10" Fill="{Binding}" />
                                </ItemContainerTemplate>

                            </ComboBox.ItemTemplate>
                        </ComboBox>
                        <ComboBox Style="{DynamicResource MaterialDesignComboBox}" x:Name="menuLanguage" HorizontalAlignment="Right" Margin="5" SelectionChanged="menuLanguage_SelectionChanged"></ComboBox>
                        <Button Style="{DynamicResource MaterialDesignOutlinedButton}" Content="{DynamicResource b_exit}" Margin="10" Click="ExitButtonClick" FlowDirection="RightToLeft" />
                    </StackPanel>
                </DockPanel>
                <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Visibility="{Binding CanAdapterSettings,Converter={StaticResource BooleanToVisibilityConverter}}" d:Visibility="Visible">
                    <ComboBox x:Name="CanBitrateField" Margin="10" MinWidth="70" SelectedIndex="{Binding SelectedCanBitrate}">
                        <ComboBox.ItemsSource>
                            <col:ArrayList>
                                <sys:Int32>0</sys:Int32>
                                <sys:Int32>20</sys:Int32>
                                <sys:Int32>50</sys:Int32>
                                <sys:Int32>100</sys:Int32>
                                <sys:Int32>125</sys:Int32>
                                <sys:Int32>250</sys:Int32>
                                <sys:Int32>500</sys:Int32>
                                <sys:Int32>800</sys:Int32>
                                <sys:Int32>1000</sys:Int32>
                            </col:ArrayList>
                        </ComboBox.ItemsSource>
                    </ComboBox>
                    <ComboBox x:Name="ModeSelector" Margin="10" MinWidth="70" SelectedIndex="{Binding SelectedCanMode}">
                        <ComboBox.ItemsSource>
                            <col:ArrayList>
                                <sys:String>Normal</sys:String>
                                <sys:String>Listen Only</sys:String>
                                <sys:String>Self Reception</sys:String>

                            </col:ArrayList>
                        </ComboBox.ItemsSource>
                    </ComboBox>
                    <Button Content="{DynamicResource b_load_can_log}" Margin="10" Command="{Binding LoadFromLogCommand}" />
                    <Button Content="{DynamicResource b_send_from_log}" Margin="10" Command="{Binding SendFromLogCommand}" Cursor="Hand" />
                    <Button Content="{Binding ToggleCanLogButtonName}" Margin="10" Command="{Binding ToggleCanLogCommand}" />
                    <TextBlock VerticalAlignment="Center" Margin="10" Text="{DynamicResource t_delay}" FontSize="25" />
                    <TextBox VerticalAlignment="Center" Margin="10" FontSize="25" MinWidth="40">
                        <TextBox.Text>
                            <Binding Path="MessageDelay" UpdateSourceTrigger="PropertyChanged">
                                <Binding.ValidationRules>
                                    <v:RangeRule Min="7" Max="5000" />
                                </Binding.ValidationRules>
                            </Binding>
                        </TextBox.Text>
                    </TextBox>

                </StackPanel>
            </StackPanel>
        </Grid>
        <DockPanel DockPanel.Dock="Top">
            <DockPanel DockPanel.Dock="Top" Visibility="{Binding OmniInstance.ConnectedDevices.Count, Converter={StaticResource IntToVisibileConverter},Mode=OneWay}">
                <Separator />
                <ListBox x:Name="DeviceSelector" DockPanel.Dock=" Left" ItemsSource="{Binding OmniInstance.ConnectedDevices}" SelectedItem="{Binding OmniInstance.SelectedConnectedDevice}">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel IsItemsHost="True" Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                </ListBox>
                <Button Margin="5" Command="{Binding OmniInstance.ClearDevicesCommand}" HorizontalAlignment="Right" DockPanel.Dock="Right">
                    <fa:ImageAwesome Icon="Solid_Trash" Margin="2 2 5 2" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" />
                </Button>
            </DockPanel>
            <Separator />

            <TabControl Style="{DynamicResource MaterialDesignNavigatilRailTabControl}">

                <TabItem>
                    <TabItem.Header>
                        <fa:ImageAwesome ToolTip="{DynamicResource b_common}" Icon="Solid_IdCardAlt" Margin="10" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" Height="40" />
                    </TabItem.Header>
                    <DockPanel Visibility="{Binding OmniInstance.SelectedConnectedDevice,Converter={StaticResource NullToVisibleConverter}}">
                        <cc:HcuOmniControl DockPanel.Dock="Top" DataContext="{Binding OmniInstance.SelectedConnectedDevice}" Visibility="{Binding DeviceReference.DevType,Converter={StaticResource OnlyForHcu}}" />
                        <cc:HeaterControl DockPanel.Dock="Top" DataContext="{Binding OmniInstance.SelectedConnectedDevice}" Visibility="{Binding DeviceReference.DevType,Converter={StaticResource OnlyForBinars}}" />
                        <cc:PressureSensorControl DockPanel.Dock="Top" DataContext="{Binding OmniInstance.SelectedConnectedDevice}" Visibility="{Binding DeviceReference.DevType,Converter={StaticResource OnlyForPressureSensors}}" />
                        <cc:BootloaderControl DockPanel.Dock="Top" DataContext="{Binding OmniInstance.SelectedConnectedDevice}" Visibility="{Binding DeviceReference.DevType,Converter={StaticResource OnlyForBootloaders}}" />
                        <cc:GenericLoadTrippleControl DockPanel.Dock="Top" DataContext="{Binding OmniInstance.SelectedConnectedDevice}" Visibility="{Binding DeviceReference.DevType,Converter={StaticResource OnlyForGenericLoadTripple}}" />
                        <cc:AcInverterControl DockPanel.Dock="Top" DataContext="{Binding OmniInstance.SelectedConnectedDevice}" Visibility="{Binding DeviceReference.DevType,Converter={StaticResource OnlyForAcInverter}}" />
                    </DockPanel>
                </TabItem>
                <TabItem >
                    <TabItem.Header>
                        <fa:ImageAwesome Icon="Solid_MailBulk" Margin="10" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" Height="40" ToolTip="{DynamicResource b_messages}" />
                    </TabItem.Header>
                    <DockPanel>
                        <DockPanel DockPanel.Dock="Top">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"></RowDefinition>
                                    <RowDefinition Height="auto"></RowDefinition>
                                </Grid.RowDefinitions>

                                <StackPanel Grid.Row="0" Orientation="Horizontal">
                                    <TextBlock Margin="5" VerticalAlignment="Center" FontSize="25">Type:</TextBlock>
                                    <TextBox ToolTip="Type" MinWidth="50" Margin="5 10" FontSize="25" TextAlignment="Center" VerticalAlignment="Center" d:Text="27">
                                        <TextBox.Text>
                                            <Binding Path="CustomMessage.ReceiverId.Type" UpdateSourceTrigger="PropertyChanged">
                                                <Binding.ValidationRules>
                                                    <v:RangeRule Min="0" Max="127" />
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </TextBox.Text>
                                    </TextBox>

                                    <TextBlock Margin="5" VerticalAlignment="Center" FontSize="25">Adr:</TextBlock>
                                    <TextBox ToolTip="Adress" MinWidth="40" Margin="5 10" FontSize="25" TextAlignment="Center" VerticalAlignment="Center" d:Text=" 0">
                                        <TextBox.Text>
                                            <Binding Path="CustomMessage.ReceiverId.Address" UpdateSourceTrigger="PropertyChanged">
                                                <Binding.ValidationRules>
                                                    <v:RangeRule Min="0" Max="7" />
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </TextBox.Text>
                                    </TextBox>
                                    <TextBlock Margin="5" VerticalAlignment="Center" FontSize="25">PGN:</TextBlock>
                                    <TextBox ToolTip="PGN" MinWidth="40" Margin="5 10" FontSize="25" TextAlignment="Center" VerticalAlignment="Center" d:Text="11">
                                        <TextBox.Text>
                                            <Binding Path="CustomMessage.Pgn" UpdateSourceTrigger="PropertyChanged">
                                                <Binding.ValidationRules>
                                                    <v:RangeRule Min="0" Max="511" />
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </TextBox.Text>
                                    </TextBox>
                                    <TextBlock Margin="5" VerticalAlignment="Center" FontSize="25">Data:</TextBlock>
                                    <cc:DataBox  ToolTip="Enter data in HEX format"   Text="{Binding CustomMessage.Data,Converter={StaticResource HexToDataConverter},UpdateSourceTrigger=PropertyChanged}" Margin="5 10"  Style="{StaticResource MaterialDesignTextBox}" FontSize="22" />
                                    <cc:DataBox ToolTip="Enter data in HEX format" Text="{Binding CustomMessage.Data,Converter={StaticResource HexToDataConverter},UpdateSourceTrigger=PropertyChanged}" Margin="5 10" Style="{StaticResource MaterialDesignTextBox}" FontSize="22" />
                                    <Button Margin="5 10" Command="{Binding Path=SendCustomMessageCommand}" Cursor="Hand">
                                        <Button.Content>
                                            <fa:ImageAwesome Icon="Solid_AngleRight" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" />
                                        </Button.Content>
                                    </Button>
                                    <CheckBox IsChecked="{Binding OmniInstance.SelectedConnectedDevice.SecondMessages}" Content="{DynamicResource t_keep_connection}" />
                                </StackPanel>
                            </Grid>
                            <TextBlock DockPanel.Dock="Right" MaxHeight="200" Margin="10" Text="{Binding Path=CustomMessage.VerboseInfo, Mode=OneWay}"></TextBlock>
                        </DockPanel>

                        <DockPanel>
                            <DataGrid x:Name="AC2PmessagesField" AutoGenerateColumns="False" Margin="5" FontFamily="Courier New" ItemsSource="{Binding OmniInstance.Messages}" SelectedItem="{Binding SelectedMessage,Mode=OneWayToSource}" SelectionChanged="AC2PmessagesField_SelectionChanged">
                                <DataGrid.RowStyle>
                                    <Style TargetType="DataGridRow">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Fresh}" Value="true">
                                                <Setter Property="Background" Value="{DynamicResource PrimaryHueDarkBrush}"></Setter>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Fresh}" Value="false">
                                                <Setter Property="Background" Value="{DynamicResource MaterialDesignCheckBoxDisabled}"></Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGrid.RowStyle>
                                <DataGrid.Columns>
                                    <DataGridTextColumn Binding="{Binding Path = Pgn}" Header="PGN" IsReadOnly="True">
                                    </DataGridTextColumn>
                                    <DataGridTextColumn Binding="{Binding Path = TransmitterId.Type}" Header="FROM" IsReadOnly="True">
                                    </DataGridTextColumn>
                                    <DataGridTextColumn Binding="{Binding Path = TransmitterId.Address}" Header="ADR" IsReadOnly="True">
                                    </DataGridTextColumn>
                                    <DataGridTextColumn Binding="{Binding Path = ReceiverId.Type}" Header="TO" IsReadOnly="True">
                                    </DataGridTextColumn>
                                    <DataGridTextColumn Binding="{Binding Path = ReceiverId.Address}" Header="ADR" IsReadOnly="True">
                                    </DataGridTextColumn>
                                    <DataGridTextColumn Binding="{Binding Path = DataAsText}" Header="DATA" IsReadOnly="True">
                                    </DataGridTextColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                            <DockPanel DockPanel.Dock="Right">
                                <TextBlock DockPanel.Dock="Top" Text="{Binding SelectedMessage.VerboseInfo,Mode=OneWay}"></TextBlock>
                                <Expander x:Name="LogExpander" ExpandDirection="Up" Header="Message Log" DockPanel.Dock="Bottom">
                                    <TextBox x:Name="LogField" IsReadOnly="True" VerticalScrollBarVisibility="Visible" />
                                </Expander>
                            </DockPanel>
                        </DockPanel>

                    </DockPanel>

                </TabItem>
                <TabItem >
                    <TabItem.Header>
                        <fa:ImageAwesome Icon="Regular_Keyboard" Margin="10" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" Height="40" ToolTip="{DynamicResource b_commands}" />
                    </TabItem.Header>
                    <DockPanel>

                        <StackPanel x:Name="CommandConstructor" DockPanel.Dock="Top" Orientation="Vertical" Margin="10">

                            <ComboBox x:Name="CommandSelector" Style="{DynamicResource MaterialDesignOutlinedComboBox}" Margin="10" ItemsSource="{Binding CommandList}" SelectionChanged="ComboBox_SelectionChanged" />

                            <Border HorizontalAlignment="Center" Margin="5" CornerRadius="10" BorderBrush="Gainsboro" BorderThickness="1">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock FontSize="25" VerticalAlignment="Center" Margin="10">Data preview:</TextBlock>
                                    <TextBlock x:Name="CommandPrevirew" TextAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="10" Text="{Binding CustomMessage.DataAsText,Mode=OneWay}"></TextBlock>
                                    <Button Margin="10" Command="{Binding Path=SendCustomMessageCommand}">
                                        <Button.Content>
                                            <fa:ImageAwesome Icon="Solid_AngleRight" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" />
                                        </Button.Content>
                                    </Button>
                                </StackPanel>
                            </Border>

                        </StackPanel>

                        <StackPanel x:Name="CommandParameterPanel" Orientation="Vertical"></StackPanel>
                    </DockPanel>
                </TabItem>
                <TabItem>
                    <TabItem.Header>
                        <fa:ImageAwesome Icon="Solid_Wrench" Margin="10" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" Height="40" ToolTip="{DynamicResource b_config}" />
                    </TabItem.Header>
                    <DockPanel>

                        <StackPanel Grid.Row="0" Orientation="Horizontal" DockPanel.Dock="Top" Margin="10">
                            <Button Content="{DynamicResource b_read}" Margin="10" Command="{Binding ReadConfigCommand}" />
                            <Button Content="{DynamicResource b_save}" Margin="10" Command="{Binding SaveConfigCommand}" />
                            <Button Content="{DynamicResource b_reset}" Margin="10" Command="{Binding ResetConfigCommand}" />

                            <TextBlock Margin="40 10 10 10" FontSize="20" VerticalAlignment="Center">Vendor</TextBlock>
                            <ComboBox Margin="10" FontSize="20" d:Text="Vendor" Text="{Binding OmniInstance.SelectedVendor}" ItemsSource="{Binding OmniInstance.AvailableVendors}" IsEditable="True"></ComboBox>
                            <TextBlock FontSize="20" VerticalAlignment="Center">Model</TextBlock>
                            <ComboBox Margin="10" d:Text="Model" FontSize="20" ItemsSource="{Binding OmniInstance.AvailableModels}" Text="{Binding OmniInstance.SelectedModel}" IsEditable="True"></ComboBox>
                            <Button Content="{DynamicResource b_save_current_config}" Margin="10" Command="{Binding OmniInstance.SavePresetCommand}" />
                            <Button Content="{DynamicResource b_load_preset}" Margin="10" Command="{Binding OmniInstance.LoadPresetCommand}" />
                            <Button Content="{DynamicResource b_delete_preset}" Margin="10" Command="{Binding OmniInstance.DeletePresetCommand}" />
                        </StackPanel>
                        <DataGrid DockPanel.Dock="Top" AlternatingRowBackground="{DynamicResource MaterialDesignCardBackground}" Margin="5" AutoGenerateColumns="False" ItemsSource="{Binding OmniInstance.SelectedConnectedDevice.ReadParameters,Mode=OneWay}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Binding="{Binding Path = Id}" Header="ID" IsReadOnly="True">
                                </DataGridTextColumn>
                                <DataGridTextColumn Binding="{Binding Path = Value}" Header="{DynamicResource t_value}">
                                </DataGridTextColumn>
                                <DataGridTextColumn Binding="{Binding Path = Name}" Header="{DynamicResource t_description}" IsReadOnly="True">
                                </DataGridTextColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </DockPanel>
                </TabItem>
                <TabItem x:Name="GraphTab">
                    <TabItem.Header>
                        <fa:ImageAwesome Icon="Solid_ChartLine" Margin="10" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" Height="40" ToolTip="{DynamicResource b_log_chart}" />
                    </TabItem.Header>
                    <Grid>
                        <DockPanel>
                            <StackPanel Margin="10" DockPanel.Dock="Top" Orientation="Horizontal">
                                <Button Margin="10" Content="{DynamicResource b_start_log}" Command="{Binding LogStartCommand}"></Button>
                                <Button Margin="10" Content="{DynamicResource b_stop_log}" Command="{Binding LogStopCommand}"></Button>
                                <Button Margin="10" Content="{DynamicResource b_redraw}" Command="{Binding ChartDrawCommand}"></Button>
                                <Button Margin="10" Content="{DynamicResource b_save_log}" Command="{Binding SaveLogCommand}" Cursor="Hand"></Button>
                                <CheckBox Margin="10" FontSize="20" Style="{StaticResource MaterialDesignFilterChipCheckBox}" Content="{DynamicResource b_autoredraw}" IsChecked="{Binding AutoRedraw}" />
                                <TextBlock Margin="10" FontSize="20" Text="{DynamicResource b_log_length}" VerticalAlignment="Center"></TextBlock>
                                <TextBlock Margin="10" FontSize="20" Text="{Binding OmniInstance.SelectedConnectedDevice.LogCurrentPos}" VerticalAlignment="Center"></TextBlock>
                                <Button Margin="10" Content="{DynamicResource b_def_set}" Command="{Binding DefaultStyleCommand}" Cursor="Hand"></Button>
                            </StackPanel>
                            <Expander DockPanel.Dock="Top" Header="{DynamicResource b_dataset}">
                                <DockPanel>
                                    <DataGrid x:Name="DataSet" Margin="20" DockPanel.Dock="Left" ItemsSource="{Binding OmniInstance.SelectedConnectedDevice.Status,Mode=OneWay}" AutoGenerateColumns="False" CanUserReorderColumns="False" AlternatingRowBackground="{DynamicResource MaterialDesignCardBackground}" SelectionChanged="DataSet_SelectionChanged">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="Variable" Binding="{Binding Path=Name}" IsReadOnly="True"></DataGridTextColumn>
                                            <DataGridTextColumn Header="Value" Binding="{Binding Path=FormattedValue}" IsReadOnly="True"></DataGridTextColumn>
                                            <DataGridCheckBoxColumn Header="Show" Binding="{Binding Path=Display}"></DataGridCheckBoxColumn>
                                            <DataGridTemplateColumn Header="Color">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal">
                                                            <Rectangle Width="30" Height="10" Fill="{Binding Path=ChartBrush}" MouseLeftButtonDown="ColorPick" />
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>

                                            <DataGridComboBoxColumn Header="Width" SelectedItemBinding="{Binding Path=LineWidth}">
                                                <DataGridComboBoxColumn.ItemsSource>
                                                    <col:ArrayList>
                                                        <sys:Int32>1</sys:Int32>
                                                        <sys:Int32>2</sys:Int32>
                                                        <sys:Int32>3</sys:Int32>
                                                        <sys:Int32>4</sys:Int32>
                                                        <sys:Int32>5</sys:Int32>
                                                    </col:ArrayList>
                                                </DataGridComboBoxColumn.ItemsSource>
                                            </DataGridComboBoxColumn>
                                            <DataGridComboBoxColumn Header="Style" SelectedItemBinding="{Binding Path=LineStyle}">
                                                <DataGridComboBoxColumn.ItemsSource>
                                                    <col:ArrayList>
                                                        <sctplt:LineStyle>0</sctplt:LineStyle>
                                                        <sctplt:LineStyle>1</sctplt:LineStyle>
                                                        <sctplt:LineStyle>2</sctplt:LineStyle>
                                                        <sctplt:LineStyle>3</sctplt:LineStyle>
                                                        <sctplt:LineStyle>4</sctplt:LineStyle>
                                                        <sctplt:LineStyle>5</sctplt:LineStyle>
                                                    </col:ArrayList>
                                                </DataGridComboBoxColumn.ItemsSource>
                                            </DataGridComboBoxColumn>
                                            <DataGridComboBoxColumn Header="Mark" SelectedItemBinding="{Binding Path=MarkShape}">
                                                <DataGridComboBoxColumn.ItemsSource>
                                                    <col:ArrayList>
                                                        <sctplt:MarkerShape>0</sctplt:MarkerShape>
                                                        <sctplt:MarkerShape>1</sctplt:MarkerShape>
                                                        <sctplt:MarkerShape>2</sctplt:MarkerShape>
                                                        <sctplt:MarkerShape>3</sctplt:MarkerShape>
                                                        <sctplt:MarkerShape>4</sctplt:MarkerShape>
                                                        <sctplt:MarkerShape>5</sctplt:MarkerShape>
                                                        <sctplt:MarkerShape>6</sctplt:MarkerShape>
                                                        <sctplt:MarkerShape>7</sctplt:MarkerShape>
                                                        <sctplt:MarkerShape>8</sctplt:MarkerShape>
                                                        <sctplt:MarkerShape>9</sctplt:MarkerShape>
                                                        <sctplt:MarkerShape>10</sctplt:MarkerShape>
                                                        <sctplt:MarkerShape>11</sctplt:MarkerShape>
                                                    </col:ArrayList>
                                                </DataGridComboBoxColumn.ItemsSource>
                                            </DataGridComboBoxColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                    <materialDesign:ColorPicker Margin="20" x:Name="ColorPicker" DockPanel.Dock="Left" MouseLeftButtonUp="ColorPicker_MouseLeftButtonUp" StylusUp="ColorPicker_StylusUp" MinHeight="200" />
                                </DockPanel>
                            </Expander>
                            <Grid DockPanel.Dock="Bottom">
                                <WpfPlot MinHeight="600" VerticalAlignment="Stretch" Name="Chart"></WpfPlot>
                            </Grid>
                        </DockPanel>

                    </Grid>

                </TabItem>
                <TabItem >
                    <TabItem.Header>
                        <fa:ImageAwesome Icon="Solid_InfoCircle" Margin="2 2 5 2" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" Height="40" ToolTip="{DynamicResource b_status}" />
                    </TabItem.Header>
                    <DataGrid ItemsSource="{Binding OmniInstance.SelectedConnectedDevice.Status,Mode=OneWay}" AlternatingRowBackground="{DynamicResource MaterialDesignCardBackground}" AutoGenerateColumns="False" CanUserReorderColumns="False" SelectionMode="Single" IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Name" Binding="{Binding Path=Name,Mode=OneWay}"></DataGridTextColumn>
                            <DataGridTextColumn Header="Value" Binding="{Binding Path=FormattedValue,Mode=OneWay}"></DataGridTextColumn>
                            <DataGridTextColumn Header="Unit" Binding="{Binding Path=AssignedParameter.Unit,Mode=OneWay}"></DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </TabItem>
                <TabItem>
                    <TabItem.Header>

                        <fa:ImageAwesome Icon="Solid_BoxOpen" Margin="10" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" Height="40" ToolTip="{DynamicResource b_black_box}" />

                    </TabItem.Header>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <DockPanel Grid.Column="0">
                            <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" VerticalAlignment="Top" Margin="10">
                                <Button Content="{DynamicResource b_read_bb_data}" Margin="10" Command="{Binding ReadBlackBoxDataCommand}"></Button>
                                <Button Content="{DynamicResource b_read_bb_errors}" Margin="10" Command="{Binding ReadBlackBoxErrorsCommand}"></Button>
                                <Button Content="{DynamicResource b_clear_bb_data}" Margin="10" Command="{Binding EraseBlackBoxDataCommand}"></Button>
                                <Button Content="{DynamicResource b_clear_bb_errors}" Margin="10" Command="{Binding EraseBlackBoxErrorsCommand}"></Button>
                                <Button Content="{DynamicResource b_save_report}" Margin="10" Command="{Binding SaveReportCommand}"></Button>
                            </StackPanel>
                            <DataGrid ItemsSource="{Binding OmniInstance.SelectedConnectedDevice.BbValues,Mode=OneWay}" AutoGenerateColumns="False" Margin="10" AlternatingRowBackground="{DynamicResource MaterialDesignCardBackground}">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="ID" Binding="{Binding Path=Id,Mode=OneWay}"></DataGridTextColumn>
                                    <DataGridTextColumn Header="{DynamicResource t_value}" Binding="{Binding Path=Value,Mode=OneWay}"></DataGridTextColumn>
                                    <DataGridTextColumn Header="{DynamicResource t_description}" Binding="{Binding Path=Description,Mode=OneWay}"></DataGridTextColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </DockPanel>
                        <DockPanel Grid.Column="1">
                            <ComboBox Style="{DynamicResource MaterialDesignOutlinedComboBox}" DockPanel.Dock="Top" x:Name="ErrorSelector" Margin="10" DisplayMemberPath="Name" ItemsSource="{Binding OmniInstance.SelectedConnectedDevice.BbErrors, Mode=OneWay}"></ComboBox>
                            <DataGrid ItemsSource="{Binding ElementName=ErrorSelector, Path=SelectedItem.Variables,Mode=OneWay}" AutoGenerateColumns="False" Margin="10" AlternatingRowBackground="{DynamicResource MaterialDesignCardBackground}">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Name" Binding="{Binding Path=Name,Mode=OneWay}"></DataGridTextColumn>
                                    <DataGridTextColumn Header="Value" Binding="{Binding Path=Value,Mode=OneWay}"></DataGridTextColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </DockPanel>
                    </Grid>
                </TabItem>
                <TabItem DataContext="{Binding ManualPage}">
                    <TabItem.InputBindings>
                        <KeyBinding Key="Q" Command="{Binding ChangeGlowPlugCommand}" CommandParameter="1" />
                        <KeyBinding Key="Q" Command="{Binding ChangeGlowPlugCommand}" Modifiers="Shift" CommandParameter="10" />
                        <KeyBinding Key="A" Command="{Binding ChangeGlowPlugCommand}" CommandParameter="-1" />
                        <KeyBinding Key="A" Command="{Binding ChangeGlowPlugCommand}" Modifiers="Shift" CommandParameter="-10" />
                        <KeyBinding Key="Z" Command="{Binding ToggleGlowPlugCommand}" />

                        <KeyBinding Key="W" Command="{Binding ChangeManualAirBlowerCommand}" CommandParameter="1" />
                        <KeyBinding Key="W" Command="{Binding ChangeManualAirBlowerCommand}" Modifiers="Shift" CommandParameter="10" />
                        <KeyBinding Key="S" Command="{Binding ChangeManualAirBlowerCommand}" CommandParameter="-1" />
                        <KeyBinding Key="S" Command="{Binding ChangeManualAirBlowerCommand}" Modifiers="Shift" CommandParameter="-10" />

                        <KeyBinding Key="E" Command="{Binding ChangeManualFuelPumpCommand}" CommandParameter="1" />
                        <KeyBinding Key="E" Command="{Binding ChangeManualFuelPumpCommand}" Modifiers="Shift" CommandParameter="10" />
                        <KeyBinding Key="D" Command="{Binding ChangeManualFuelPumpCommand}" CommandParameter="-1" />
                        <KeyBinding Key="D" Command="{Binding ChangeManualFuelPumpCommand}" Modifiers="Shift" CommandParameter="-10" />

                        <KeyBinding Key="R" Command="{Binding ChangeManualFuelPumpCommand}" CommandParameter="50" />
                        <KeyBinding Key="F" Command="{Binding ChangeManualFuelPumpCommand}" CommandParameter="-50" />
                        <KeyBinding Key="C" Command="{Binding ChangeManualFuelPumpCommand}" CommandParameter="-1000" />

                        <KeyBinding Key="P" Command="{Binding ToggleWaterPumpCommand}" />

                    </TabItem.InputBindings>

                    <TabItem.Header>
                        <fa:ImageAwesome Icon="Solid_Cogs" Margin="10" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" Height="40" ToolTip="{DynamicResource b_manual}" />
                    </TabItem.Header>
                    <DockPanel>
                        <StackPanel Margin="10" DockPanel.Dock="Top" Orientation="Horizontal">
                            <Button Margin="10" Content="{DynamicResource b_enter_manual}" Command="{Binding EnterManualModeCommand}" />
                            <Button Margin="10" Content="{DynamicResource b_leave_manual}" Command="{Binding ExitManualModeCommand}" />

                            <CheckBox Margin="5" Style="{StaticResource MaterialDesignSwitchDarkToggleButton }" IsChecked="{Binding ManualWaterPump,Mode=OneWay}" IsEnabled="{Binding Vm.OmniInstance.SelectedConnectedDevice.ManualMode,TargetNullValue=false}" Visibility="{Binding Vm.OmniInstance.SelectedConnectedDevice.DeviceReference.DevType,Converter={StaticResource OnlyForBinars}}" Command="{Binding ToggleWaterPumpCommand}" />
                            <TextBlock Margin="5" FontSize="25" VerticalAlignment="Center" Text="{DynamicResource b_water_pump}" Visibility="{Binding Vm.OmniInstance.SelectedConnectedDevice.DeviceReference.DevType,Converter={StaticResource OnlyForBinars}}"></TextBlock>
                            <Button Margin="10" Content="{DynamicResource b_1000_ticks}" Command="{Binding PumpCheckCommand}" />
                        </StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="4*"></ColumnDefinition>
                                <ColumnDefinition Width="3*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*"></ColumnDefinition>
                                    <ColumnDefinition Width="1*"></ColumnDefinition>
                                    <ColumnDefinition Width="1*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="1*"></RowDefinition>
                                    <RowDefinition Height="1*"></RowDefinition>
                                    <RowDefinition Height="2*"></RowDefinition>
                                    <RowDefinition Height="10*"></RowDefinition>
                                    <RowDefinition Height="2*"></RowDefinition>
                                    <RowDefinition Height="1*"></RowDefinition>
                                </Grid.RowDefinitions>
                                <Grid Grid.Column="0" Grid.Row="2">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <Button Margin="5" Grid.Column="0" Content="+1" Command="{Binding ChangeManualAirBlowerCommand}" />
                                    <Button Margin="5" Grid.Column="1" Content="+10" Command="{Binding ChangeManualAirBlowerCommand}" CommandParameter="10" />
                                </Grid>
                                <Grid Grid.Column="0" Grid.Row="4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <Button Margin="5" Grid.Column="0" Content="-1" Command="{Binding ChangeManualAirBlowerCommand}" CommandParameter="-1" />
                                    <Button Margin="5" Grid.Column="1" Content="-10" Command="{Binding ChangeManualAirBlowerCommand}" CommandParameter="-10" />
                                </Grid>
                                <Grid Grid.Column="1" Grid.Row="2">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <Button Margin="5" Grid.Column="0" Content="+.05" Command="{Binding ChangeManualFuelPumpCommand}" CommandParameter="5" />
                                    <Button Margin="5" Grid.Column="1" Content="+1" Command="{Binding ChangeManualFuelPumpCommand}" CommandParameter="100" />
                                </Grid>
                                <Grid Grid.Column="1" Grid.Row="4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <Button Margin="5" Grid.Column="0" Content="-.05" Command="{Binding ChangeManualFuelPumpCommand}" CommandParameter="-5" />
                                    <Button Margin="5" Grid.Column="1" Content="-1" Command="{Binding ChangeManualFuelPumpCommand}" CommandParameter="-100" />
                                </Grid>
                                <Grid Grid.Column="1" Grid.Row="2">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <Button Margin="5" Grid.Column="0" Content="+.05" Command="{Binding ChangeManualFuelPumpCommand}" CommandParameter="5" />
                                    <Button Margin="5" Grid.Column="1" Content="+1" Command="{Binding ChangeManualFuelPumpCommand}" CommandParameter="100" />
                                </Grid>
                                <Grid Grid.Column="2" Grid.Row="2">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <Button Margin="5" Grid.Column="0" Content="+1" Command="{Binding ChangeGlowPlugCommand}" CommandParameter="1" />
                                    <Button Margin="5" Grid.Column="1" Content="+10" Command="{Binding ChangeGlowPlugCommand}" CommandParameter="10" />
                                </Grid>
                                <Grid Grid.Column="2" Grid.Row="4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <Button Margin="5" Grid.Column="0" Content="-1" Command="{Binding ChangeGlowPlugCommand}" CommandParameter="-1" />
                                    <Button Margin="5" Grid.Column="1" Content="-10" Command="{Binding ChangeGlowPlugCommand}" CommandParameter="-10" />
                                </Grid>

                                <TextBox Grid.ColumnSpan="4" Grid.Column="0" Grid.Row="5" Text="{DynamicResource t_hold_shift}" />

                                <TextBlock Grid.Column="0" Grid.Row="0" Text="{DynamicResource b_air_set}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" />
                                <StackPanel Orientation="Horizontal" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Center">
                                    <TextBlock Text="{Binding ManualAirBlower,Mode=OneWay,TargetNullValue=0}" HorizontalAlignment="Center" FontSize="20" d:Text="45" />
                                    <TextBlock Text="/" HorizontalAlignment="Center" FontSize="20" />
                                    <TextBlock FontSize="20" Text="{Binding Vm.OmniInstance.SelectedConnectedDevice.Parameters.RevMeasured,TargetNullValue=0,Mode=OneWay}" HorizontalAlignment="Center" d:Text="46"></TextBlock>
                                </StackPanel>
                                <Rectangle x:Name="SetAirRect" Grid.Column="0" Grid.Row="3" Margin="10"></Rectangle>
                                <ProgressBar VerticalAlignment="Center" HorizontalAlignment="Center" Margin="40 0 40 0" Foreground="{DynamicResource PrimaryHueDarkBrush}" Grid.Column="0" Grid.Row="3" Maximum="200" Value="{Binding ManualAirBlower,Mode=OneWay,TargetNullValue=0 }" Orientation="Vertical" MouseWheel="ManualAirMouseWheelEventHandler" Width="{Binding ElementName=SetAirRect,Path=ActualHeight}" Height="{Binding ElementName=SetAirRect,Path=ActualWidth}" Panel.ZIndex="2" />
                                <ProgressBar VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="{DynamicResource SecondaryHueMidBrush}" Grid.Column="0" Grid.Row="3" Maximum="200" Value="{Binding Vm.OmniInstance.SelectedConnectedDevice.Parameters.RevMeasured,TargetNullValue=0,Mode=OneWay}" Orientation="Vertical" Width="{Binding ElementName=SetAirRect,Path=ActualHeight}" Height="{Binding ElementName=SetAirRect,Path=ActualWidth}" Panel.ZIndex="1" />

                                <TextBlock Grid.Column="1" Grid.Row="0" FontSize="20" Text="{DynamicResource b_fuel_pump_set}" HorizontalAlignment="Center" VerticalAlignment="Center"></TextBlock>
                                <TextBlock Grid.Column="1" Grid.Row="1" FontSize="20" Text="{Binding ManualFuelPump,Mode=OneWay,Converter={StaticResource FuelPumpConverter}}" HorizontalAlignment="Center" VerticalAlignment="Center" d:Text="3"></TextBlock>
                                <Rectangle x:Name="SetPumpRect" Grid.Column="2" Grid.Row="3" Margin="10"></Rectangle>
                                <ProgressBar VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="{DynamicResource PrimaryHueDarkBrush}" d:Value="100" Grid.Column="1" Grid.Row="3" Value="{Binding ManualFuelPump,TargetNullValue=0,Mode=OneWay}" Maximum="700" Orientation="Vertical" Width="{Binding ElementName=SetPumpRect,Path=ActualHeight}" Height="{Binding ElementName=SetPumpRect,Path=ActualWidth}" MouseWheel="ManualFuelMouseWheelEventHandler"></ProgressBar>

                                <TextBlock Grid.Column="2" Grid.Row="0" FontSize="20" Text="{DynamicResource b_glow_plug_set}" HorizontalAlignment="Center" VerticalAlignment="Center"></TextBlock>
                                <TextBlock Grid.Column="2" Grid.Row="1" FontSize="20" Text="{Binding ManualGlowPlug,Mode=OneWay}" HorizontalAlignment="Center" VerticalAlignment="Center"></TextBlock>
                                <Rectangle x:Name="SetPlugRect" Grid.Column="3" Grid.Row="3" Margin="10"></Rectangle>
                                <ProgressBar VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="{DynamicResource PrimaryHueDarkBrush}" Grid.Column="2" Grid.Row="3" Value="{Binding ManualGlowPlug,TargetNullValue=0,Mode=OneWay}" Orientation="Vertical" Width="{Binding ElementName=SetPumpRect,Path=ActualHeight}" Height="{Binding ElementName=SetPumpRect,Path=ActualWidth}" MouseWheel="ManualGlowPlugMouseWheelEventHandler"></ProgressBar>

                            </Grid>

                            <DataGrid Grid.Column="3" ItemsSource="{Binding Vm.OmniInstance.SelectedConnectedDevice.Status,Mode=OneWay}" AlternatingRowBackground="{DynamicResource MaterialDesignCardBackground}" AutoGenerateColumns="False" CanUserReorderColumns="False" SelectionMode="Single" IsReadOnly="True" MinHeight="400">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="{DynamicResource t_name}" Binding="{Binding Path=Name,Mode=OneWay}"></DataGridTextColumn>
                                    <DataGridTextColumn Header="{DynamicResource t_value}" Binding="{Binding Path=FormattedValue,Mode=OneWay}"></DataGridTextColumn>
                                    <DataGridTextColumn Binding="{Binding Path=AssignedParameter.Unit,Mode=OneWay}"></DataGridTextColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </DockPanel>

                </TabItem>
                <TabItem DataContext="{Binding FirmwarePage}">
                    <TabItem.Header>

                        <fa:ImageAwesome Icon="Solid_FileCode" Margin="10" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" Height="40" ToolTip="{DynamicResource b_firmware}" />

                    </TabItem.Header>
                    <DockPanel>
                        <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="10">
                            <Button Content="{DynamicResource b_load_hex}" Margin="10" Command="{Binding LoadHexCommand}" />
                            <Button Content="{DynamicResource b_switch_to_boot}" Margin="10" Command="{Binding SwitchToBootLoaderCommand}" />
                            <Button Content="{DynamicResource b_burn}" Margin="10" Command="{Binding UpdateFirmwareCommand}" />
                            <Button Content="{DynamicResource b_burn_old}" Margin="10" Command="{Binding UpdateFirmwareOldCommand}" />
                            <Button Content="{DynamicResource b_switch_to_main_program}" Margin="10" Command="{Binding SwitchToMainProgramCommand}" />
                            <Button Content="{DynamicResource b_find_boot}" Margin="10" Command="{Binding RequestBootLoaderVersionCommand}" />
                            <Button Content="{DynamicResource b_get_version}" Margin="10" Command="{Binding GetVersionCommand}" />
                        </StackPanel>
                        <StackPanel DockPanel.Dock="Top">
                            <TextBlock Margin="10" VerticalAlignment="Center" FontSize="20" Text="{Binding Vm.OmniInstance.SelectedConnectedDevice.Firmware,Converter={StaticResource VersionConverter}, Mode=OneWay}" />
                            <TextBlock Margin="10" VerticalAlignment="Center" FontSize="20" Text="{Binding Vm.OmniInstance.SelectedConnectedDevice.BootFirmware,Converter={StaticResource VersionConverter},Mode=OneWay}" />
                            <TextBlock Margin="10" VerticalAlignment="Center" FontSize="20" Text="{Binding Vm.OmniInstance.SelectedConnectedDevice.ProductionDate,Mode=OneWay}" />
                        </StackPanel>
                        <TextBox x:Name="logField" DockPanel.Dock="Top" Text="{Binding Log,Mode=OneWay}" ScrollViewer.CanContentScroll="True" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="20" IsReadOnly="True" FontFamily="Courier New"></TextBox>
                        <StackPanel></StackPanel>
                    </DockPanel>
                </TabItem>
            </TabControl>
        </DockPanel>
    </DockPanel>
</Window>

    